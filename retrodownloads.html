<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>~*~ CHANCYDF.COM ~*~ FREE MIDIs</title>

<script src="https://cdn.jsdelivr.net/npm/midi@0.3.1/build/MIDI.min.js"></script>

<style>
body {
  background-color: #d7ecff;
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAIklEQVQIW2NkQAKrVq36zwjjgzhQwomJiQHEBynA5cAMAAAz1Q/z/oOaYAAAAABJRU5ErkJggg==');
  color: #000;
  font-family: "Times New Roman", Times, serif;
  margin: 0;
  padding: 10px;
}

table.main-layout {
  width: 800px;
  background-color: #e9f5ff;
  border: 2px solid #3a86ff;
  margin: 0 auto;
  box-shadow: 10px 10px 0 rgba(0,0,0,0.5);
}

td.sidebar {
  width: 160px;
  background-color: #a8d5ff;
  padding: 10px;
  border-right: 2px solid #3a86ff;
  font-size: 12px;
  text-align: center;
}

td.content {
  padding: 20px;
}

h1 {
  font-family: Courier New, monospace;
  color: #ff7eb9;
  text-shadow: 2px 2px #000;
  font-size: 28px;
  background: #000;
  padding: 5px;
  border: 2px ridge #fff;
  margin: 0;
}

.track-img {
  width: 100px;
  border: 1px solid #000;
}

.retro-btn {
  display: block;
  width: 140px;
  margin: 4px auto;
  background: #c0c0c0;
  border-top: 2px solid #fff;
  border-left: 2px solid #fff;
  border-bottom: 2px solid #000;
  border-right: 2px solid #000;
  padding: 4px;
  font-family: MS Sans Serif, Geneva, sans-serif;
  font-size: 12px;
  cursor: pointer;
}

table.track-list {
  width: 100%;
  border-collapse: collapse;
  background: #fff;
}

table.track-list th {
  background: #000080;
  color: white;
  padding: 4px;
  font-size: 12px;
}

table.track-list td {
  border: 1px solid #ccc;
  padding: 5px;
  font-size: 13px;
}

.track-meta {
  font-size: 11px;
  color: #444;
  margin-top: 6px;
}
</style>
</head>

<body>

<table class="main-layout">
<tr>
<td colspan="2" style="background:#000;padding:10px;text-align:center;">
<img src="/graphics/chancydfcomlogoblue.png" width="300">
</td>
</tr>

<tr>
<td class="sidebar">
<b>:: MENU ::</b><br><br>
<a href="retroindex.html" class="retro-btn">&lt;&lt; HOME</a>
<hr>
<b>Stats</b><br>
3 Files<br>
100% Free
</td>

<td class="content">

<center>
<h1>ROYALTY FREE MIDIs</h1>
<br>
Download and preview MIDI compositions
</center>

<br>

<div id="tracksArea"></div>

</td>
</tr>
</table>

<script>
fetch('assets/marquee.txt').then(r=>r.text()).then(t=>{
const l=t.split('\n').filter(x=>x.trim());
document.title=l[Math.floor(Math.random()*l.length)];
}).catch(()=>{});

const TRACKS=[
{file:'puzzlingproblem',title:'Puzzling Problem',length:'1:06',volume:'Vol. 1',date:'May 8, 2024',youtube:'https://youtu.be/G1lb2BqG5hI?si=RPFAJgYKPikS4gWs'},
{file:'waitwhat',title:'Wait, What?',length:'1:00',volume:'Vol. 1',date:'May 8, 2024',youtube:'https://youtu.be/fIFiI2SFmBI?si=kCIsC4hUxVsw0Ujw'},
{file:'groovysuspense',title:'Groovy Suspense',length:'1:44',volume:'Vol. 2',date:'February 27, 2025',youtube:'https://youtu.be/-r_qTER3X2A?si=CctqU1pPwym2YGcO'}
];

let midiReady=false;
let currentInfo={};

function loadMIDI(cb){
if(midiReady){cb();return;}
MIDI.loadPlugin({
soundfontUrl:"https://gleitz.github.io/midi-js-soundfonts/FluidR3_GM/",
instrument:"acoustic_grand_piano",
onsuccess:function(){midiReady=true;cb();}
});
}

function playMIDI(file,metaEl){
loadMIDI(()=>{
fetch('/midi/'+file+'.mid')
.then(r=>r.arrayBuffer())
.then(b=>{
const data=MIDI.File(b);
let tempos=[];
let instruments=new Set();
data.tracks.forEach(tr=>{
tr.forEach(e=>{
if(e.meta && e.meta.type==='setTempo'){
tempos.push(Math.round(60000000/e.meta.microsecondsPerBeat));
}
if(e.subtype==='programChange'){
instruments.add(MIDI.GM.byId[e.programNumber].instrument);
}
});
});
metaEl.innerHTML=
'Tempo: '+(tempos[0]||'Unknown')+' BPM<br>'+
'Instruments: '+(Array.from(instruments).join(', ')||'Unknown');
MIDI.Player.loadFile('/midi/'+file+'.mid',()=>MIDI.Player.start());
});
});
}

function stopMIDI(){
MIDI.Player.stop();
}

function render(){
const area=document.getElementById('tracksArea');
const table=document.createElement('table');
table.className='track-list';
table.innerHTML='<tr><th>PREVIEW</th><th>TRACK INFO</th><th>ACTIONS</th></tr>';

TRACKS.forEach(t=>{
const row=document.createElement('tr');
const meta=document.createElement('div');
meta.className='track-meta';

row.innerHTML=`
<td align="center">
<a href="${t.youtube}" target="_blank">
<img class="track-img" src="track names/${t.file}.png">
</a>
</td>
<td>
<b>${t.title}</b><br>
Filename: ${t.file}.mid<br>
Date: ${t.date}<br>
Length: ${t.length} | ${t.volume}
</td>
<td align="center"></td>
`;
row.children[1].appendChild(meta);

const btns=document.createElement('div');
btns.innerHTML=`
<button class="retro-btn">▶ PLAY</button>
<button class="retro-btn">■ STOP</button>
<a class="retro-btn" href="/midi/${t.file}.mid" download>DOWNLOAD MIDI</a>
`;
btns.children[0].onclick=()=>playMIDI(t.file,meta);
btns.children[1].onclick=()=>stopMIDI();

row.children[2].appendChild(btns);
table.appendChild(row);
});
area.appendChild(table);
}

render();
</script>

</body>
</html>
